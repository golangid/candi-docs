# Configuration

Candi using .env file configuration inside generated service, .env file will be automatically generated with candi's required key value to run a service.

?> If you are new to .env file, **DO NOT** commit your .env file to a public repository ! .env file should only exists in your local service folder and deployment server.

## Your specified env configuration

You can add your own env key value inside **.env** file and parse into struct using struct tag **`env:"{your_specified_env_key}"`** in **`{your_service}/pkg/shared/environment.go`** file like this :

<img src="assets/config-env-file.png" />

<img src="assets/config-env-go.png" />

and you can call it from **anywhere** inside your service by import **`{your_service_name}/pkg/shared`** and use with **`shared.GetEnv().{your_env_variable}`** like this :

<img src="assets/config-env-usage.png" />

supported data types with env struct tags :
- time.Duration
- time.Time
- int32, int, int64
- float32, float64
- bool
- string
- []string


## Required candi's .env file configuration
| Key                                 | Value                                            | Description                                                                                                                                                                                                                                                               |
| ----------------------------------- | ------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ENVIRONMENT**                     | **Development** or **Staging** or **Production** | describing your server environment, usefull to use debug when in development mode                                                                                                                                                                                         |
| **DEBUG_MODE**                      | **true** or **false**                            | print log info and errors to your terminal                                                                                                                                                                                                                                |
| **NO_AUTH**                         | **true** or **false**                            | specify your service using basic auth or not. set it to **false** to use basic auth                                                                                                                                                                                       |
| **BASIC_AUTH_USERNAME**             | **string value**                                 | your specified basic auth username (usage with **NO_AUTH=false** env)                                                                                                                                                                                                     |
| **BASIC_AUTH_PASS**                 | **string value**                                 | your specified basic auth password  (usage with **NO_AUTH=false** env)                                                                                                                                                                                                    |
| **USE_REST**                        | **true** or **false**                            | automatically filled when generate service's [**REST HTTP handler**](/service/module/handler/rest/?id=http)                                                                                                                                                               |
| **USE_GRPC**                        | **true** or **false**                            | automatically filled when generate service's [**REST GRPC handler**](/service/module/handler/rest/)                                                                                                                                                                       |
| **USE_GRAPHQL**                     | **true** or **false**                            | automatically filled when generate service's [**REST GraphQL handler**](/service/module/handler/rest/)                                                                                                                                                                    |
| **USE_KAFKA_CONSUMER**              | **true** or **false**                            | automatically filled when generate service's [**worker kafka handler**](/service/module/handler/worker/?id=kafka)                                                                                                                                                         |
| **USE_CRON_SCHEDULER**              | **true** or **false**                            | automatically filled when generate service's [**worker cron scheduler handler**](/service/module/handler/worker/?id=cron)                                                                                                                                                 |
| **USE_REDIS_SUBSCRIBER**            | **true** or **false**                            | automatically filled when generate service's [**worker redis subscriber handler**](/service/module/handler/worker/?id=redis)                                                                                                                                              |
| **USE_TASK_QUEUE_WORKER**           | **true** or **false**                            | automatically filled when generate service's [**worker taskqueue handler**](/service/module/handler/worker/?id=taskqueue)                                                                                                                                                 |
| **USE_POSTGRES_LISTENER_WORKER**    | **true** or **false**                            | automatically filled when generate service's [**worker postgres listener handler**](/service/module/handler/worker/?id=postgres-listener)                                                                                                                                 |
| **USE_RABBITMQ_CONSUMER**           | **true** or **false**                            | automatically filled when generate service's [**worker rabbit mq handler**](/service/module/handler/worker/?id=rabbitmq)                                                                                                                                                  |
| **USE_SHARED_LISTENER**             | **true** or **false**                            | using the same port of http and grpc handlers if both are enabled in your service                                                                                                                                                                                         |
| **HTTP_PORT**                       | **integer value**                                | your specified http port value                                                                                                                                                                                                                                            |
| **GRPC_PORT**                       | **integer value**                                | your specified grpc port value                                                                                                                                                                                                                                            |
| **TASK_QUEUE_DASHBOARD_PORT**       | **integer value**                                | your specified task queue monitoring dashboard port value (usage with **USE_TASK_QUEUE_WORKER=true** env). see [**Task Queue**](/taskque)                                                                                                                                 |
| **TASK_QUEUE_DASHBOARD_MAX_CLIENT** | **integer value**                                | your specified maximum users to open task queue monitoring dashboard at the same time (usage with **USE_TASK_QUEUE_WORKER=true** env). see [**Task Queue**](/taskque)                                                                                                     |
| **GRAPHQL_DISABLE_INTROSPECTION**   | **integer value**                                | your specified maximum users to open task queue monitoring dashboard at the same time (usage with **USE_GRAPHQL=true** env)                                                                                                                                               |
| **HTTP_ROOT_PATH**                  | **string value**                                 |                                                                                                                                                                                                                                                                           |
| **USE_CONSUL**                      | **true** or **false**                            | set to true for distributed lock for multiple instance servers (when you deployed and run the same service into different instance servers) to avoid race conditions                                                                                                      |
| **CONSUL_AGENT_HOST**               | **string host value**                            | host of consule to manage lock distribution for multiple of the same applications                                                                                                                                                                                         |
| **CONSUL_MAX_JOB_REBALANCE**        | **integer value**                                |                                                                                                                                                                                                                                                                           |
| **MONGODB_HOST_WRITE**              | **string host value**                            | your specified mongodb write client connection when use monogdb or using task queue worker handler with mongodb database                                                                                                                                                  |
| **MONGODB_HOST_READ**               | **string host value**                            | your specified mongodb read client connection when use monogdb or using task queue worker handler with mongodb database. if your mongodb user has read and write access, you can specify both **MONGODB_HOST_WRITE** and **MONGODB_HOST_READ** with the same value        |
| **SQL_DB_READ_DSN**                 | **string host value**                            | your specified sql database read client connection when use sql database.                                                                                                                                                                                                 |
| **SQL_DB_WRITE_DSN**                | **string host value**                            | your specified sql database write client connection when use sql database.if your sql user has read and write access, you can specify both **SQL_DB_READ_DSN** and **SQL_DB_WRITE_DSN** with the same value                                                               |
| **REDIS_READ_DSN**                  | **string host value**                            | your specified redis read client connection when use redis subcriber or use redis as module dependencies to read key value from redis.                                                                                                                                    |
| **REDIS_WRITE_DSN**                 | **string host value**                            | your specified write read client connection when use redis subcriber or use redis as module dependencies to write key value from redis. if your redis user has read and write access, you can specify both **REDIS_READ_DSN** and **REDIS_WRITE_DSN** with the same value |
| **KAFKA_BROKERS**                   | **string host value**                            | your specified kafka broker host when use kafka consumer or use kafka publisher dependencies in your module, comma separated values for multiple brokers                                                                                                                  |
| **KAFKA_CLIENT_VERSION**            | **string value**                                 | your specified kafka version info                                                                                                                                                                                                                                         |
| **KAFKA_CLIENT_ID**                 | **string value**                                 | your specified kafka client id                                                                                                                                                                                                                                            |
| **KAFKA_CONSUMER_GROUP**            | **string value**                                 | your specified kafka consumer group                                                                                                                                                                                                                                       |
| **JAEGER_TRACING_HOST**             | **string host value**                            | your specified open tracing jaeger host (not required)                                                                                                                                                                                                                    |
| **JAEGER_TRACING_DASHBOARD**        | **string host value**                            | your specified dashboard open tracing jaeger host (not required)                                                                                                                                                                                                          |
| **JAEGER_MAX_PACKET_SIZE**          | **integer value**                                | your specified maximum open tracing jaeger packet size in bytes (not required)                                                                                                                                                                                            |
| **MAX_GOROUTINES**                  | **integer value**                                |                                                                                                                                                                                                                                                                           |
